(function(){"use strict";var t={4447:function(t,e,o){o.d(e,{vm:function(){return tt}});var n=o(144),i=o(998),r=o(9582),s=o(4886),l=o(433),d=function(){var t=this,e=t._self._c;return e(i.Z,[e(l.Z,[e(r.Z,[e(s.EB,[e("MyHeader")],1),e(s.ZB,{directives:[{name:"show",rawName:"v-show",value:!t.empty,expression:"!empty"}]},[e("MyList")],1),e(s.ZB,{directives:[{name:"show",rawName:"v-show",value:!t.empty,expression:"!empty"}]},[e("MyFooter")],1)],1)],1)],1)},u=[],a=o(5808),c=function(){var t=this,e=t._self._c;return e(a.Z,t._l(t.todos,(function(t){return e("MyItem",{key:t.id,attrs:{todo:t}})})),1)},f=[],p=(o(541),o(6086));const h=(0,p.Q_)("todos",{state:()=>({todos:[]}),getters:{empty:t=>!t.todos.length,doneCount:t=>t.todos.reduce(((t,e)=>t+e.done),0),total:t=>t.todos.length,allDone:t=>t.doneCount===t.total,halfProgress:t=>t.doneCount>=3},actions:{addTodo(t){this.todos.unshift(t),console.log(this.todos)},getTodoById(t){return this.todos.find((e=>e.id===t))},clearDone(){return this.todos=this.todos.filter((t=>!t.done))},updateAll(t){this.todos.forEach((e=>e.done=t))},deleteTodoById(t){this.todos=this.todos.filter((e=>e.id!==t))},editTitle(t,e){this.getTodoById(t).title=e}}});var m=o(6190),y=o(9111),v=o(4525),g=o(3687),b=o(28),k=function(){var t=this,e=t._self._c;return e(v.Z,[e(y.Z,{attrs:{label:t.myTodo.isEditing?"":t.myTodo.title},model:{value:t.myTodo.done,callback:function(e){t.$set(t.myTodo,"done",e)},expression:"myTodo.done"}}),e(b.Z,{directives:[{name:"show",rawName:"v-show",value:t.myTodo.isEditing,expression:"myTodo.isEditing"}],ref:"editInput",attrs:{value:t.todo.title},on:{blur:t.confirmEdit,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirmEdit.apply(null,arguments)}}}),e(g.Z),e(m.Z,{directives:[{name:"show",rawName:"v-show",value:!t.myTodo.isEditing,expression:"!myTodo.isEditing"}],on:{click:t.editing}},[t._v("编辑")]),e(m.Z,{staticClass:"ml-2",on:{click:function(e){return t.deleteTodoById(t.todo.id)}}},[t._v("删除")])],1)},T=[],Z={name:"MyItem",props:["todo"],setup(){const{deleteTodoById:t,editTitle:e}=h();return{deleteTodoById:t,editTitle:e}},data(){return{myTodo:this.todo}},methods:{editing(){this.myTodo.isEditing=!0,this.$nextTick((()=>{this.$refs.editInput.focus()}))},confirmEdit(t){t.target.value&&this.editTitle(this.myTodo.id,t.target.value),this.myTodo.isEditing=!1}}},w=Z,x=o(1001),_=(0,x.Z)(w,k,T,!1,null,null,null),E=_.exports,M={name:"MyList",components:{MyItem:E},setup(){const t=h();let{todos:e}=JSON.parse(localStorage.getItem("todos"))||{todos:[]};return t.$patch({todos:e}),console.log(t),e=(0,p.Jk)(t).todos,console.log(e),t.$subscribe(((t,e)=>localStorage.setItem("todos",JSON.stringify(e)))),{todos:e}}},O=M,I=(0,x.Z)(O,c,f,!1,null,null,null),P=I.exports,C=function(){var t=this,e=t._self._c;return e(b.Z,{attrs:{label:"输入待办事项，回车确认"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})},$=[],B=o(3416),j={name:"MyHeader",setup(){const{addTodo:t}=h();return{addTodo:t}},data(){return{text:""}},methods:{add(){if(!this.text.trim())return;const t={id:(0,B.x0)(),title:this.text,done:!1,isEditing:!1};this.addTodo(t),this.text=""}}},S=j,A=(0,x.Z)(S,C,$,!1,null,null,null),D=A.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-space-between"},[e(y.Z,{attrs:{label:t.completeInfo},model:{value:t.check,callback:function(e){t.check=e},expression:"check"}}),e(m.Z,{on:{click:t.clearDone}},[t._v("删除已完成")])],1)},N=[],J={name:"MyFooter",setup(){const t=h(),{doneCount:e,updateAll:o,clearDone:n,allDone:i,total:r}=(0,p.Jk)(t);return{doneCount:e,updateAll:o,clearDone:n,allDone:i,total:r}},computed:{check:{get(){return this.allDone},set(t){this.updateAll(t)}},completeInfo(){return`完成${this.doneCount}/全部${this.total}`}},mounted(){this.$bus.$on("check-all",this.updateAll)}},F=J,H=(0,x.Z)(F,L,N,!1,null,null,null),Q=H.exports;let W=null;var q={setListener(){window.addEventListener("message",(function(t){W||(W=t.origin);const{action:e,param:o}=t.data;console.log(e,o),"connect"!==e&&"checkAll"===e&&tt.$bus.$emit("check-all",!0)}))},postMessage(t,e){console.log(t,e,"sub"),window.postMessage({action:t,param:e},W)}},z={name:"App",components:{MyList:P,MyHeader:D,MyFooter:Q},setup(){const t=(0,p.Jk)(h()),{empty:e,halfProgress:o}=t;return{empty:e,halfProgress:o}},mounted(){console.log(this),q.setListener()}},G=z,K=(0,x.Z)(G,d,u,!1,null,null,null),R=K.exports,U=o(8864);n.ZP.use(U.Z);var V=new U.Z({}),X=o(5706);n.ZP.use(p.og);const Y=(0,p.WB)();n.ZP.use(X.ZP),n.ZP.config.productionTip=!1,n.ZP.use(U.Z);const tt=new n.ZP({components:{App:R},render:t=>t(R),pinia:Y,vuetify:V,beforeCreate(){n.ZP.prototype.$bus=this}}).$mount("#app")}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}o.m=t,function(){var t=[];o.O=function(e,n,i,r){if(!n){var s=1/0;for(a=0;a<t.length;a++){n=t[a][0],i=t[a][1],r=t[a][2];for(var l=!0,d=0;d<n.length;d++)(!1&r||s>=r)&&Object.keys(o.O).every((function(t){return o.O[t](n[d])}))?n.splice(d--,1):(l=!1,r<s&&(s=r));if(l){t.splice(a--,1);var u=i();void 0!==u&&(e=u)}}return e}r=r||0;for(var a=t.length;a>0&&t[a-1][2]>r;a--)t[a]=t[a-1];t[a]=[n,i,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={826:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,r,s=n[0],l=n[1],d=n[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(i in l)o.o(l,i)&&(o.m[i]=l[i]);if(d)var a=d(o)}for(e&&e(n);u<s.length;u++)r=s[u],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(a)},n=self["webpackChunktest"]=self["webpackChunktest"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(4447)}));n=o.O(n)})();
//# sourceMappingURL=index.ffb0b235.js.map